תיעוד פרויקט: Marketplace App
📱 סקירה כללית
האפליקציה היא מערכת לניהול פריטים (Marketplace) המאפשרת למשתמש לצפות ברשימת מוצרים, להוסיף מוצרים חדשים (כולל תמונה, מחיר ופרטים), לערוך אותם ולמחוק אותם.
האפליקציה פותחה בשפת Kotlin ומבוססת על הארכיטקטורה המומלצת על ידי גוגל: MVVM (Model-View-ViewModel).
🏗️ ארכיטקטורה ומבנה הפרויקט
הפרויקט בנוי בשיטת "הפרדת רשויות" (Separation of Concerns), כך שכל חלק אחראי על משהו אחד בלבד. זה מקל על תחזוקה, בדיקות ומניעת באגים.
1. שכבת הנתונים (Data Layer)
שכבה זו אחראית על שמירת המידע וטעינתו ממסד הנתונים המקומי (Room). הקבצים נמצאים בתיקייה data.
MarketItem.kt (המודל / Entity):
זוהי המחלקה שמגדירה איך נראה "פריט" אחד באפליקציה.
היא מכילה את השדות: מזהה ייחודי (ID), כותרת, תיאור, מחיר, טלפון ליצירת קשר, ונתיב לתמונה (URI).
הסימון @Entity מגדיר למערכת ליצור טבלה בבסיס הנתונים עבור המודל הזה.
MarketDao.kt (Data Access Object):
זהו הממשק שמגדיר את הפעולות שניתן לבצע על הנתונים.
במקום לכתוב שאילתות SQL מורכבות בכל מקום בקוד, הגדרנו פונקציות פשוטות: insert (הוספה), delete (מחיקה), update (עדכון) ו-getAllItems (קבלת כל הפריטים).
AppDatabase.kt:
מחלקה זו מנהלת את החיבור הפיזי למסד הנתונים במכשיר.
היא משתמשת בתבנית Singleton כדי להבטיח שיש רק חיבור אחד פתוח בכל רגע נתון, מה שחוסך במשאבי זיכרון.
MarketRepository.kt:
זהו "מנהל הנתונים" הראשי.
הוא משמש כמתווך. ה-ViewModel לא מדבר ישירות עם מסד הנתונים, אלא מבקש מה-Repository.
מבנה זה מאפשר גמישות: אם בעתיד נרצה להביא נתונים גם מהאינטרנט (Cloud), נשנה רק את הקובץ הזה והשאר יעבוד כרגיל.
2. שכבת הלוגיקה והמצב (ViewModel Layer)
שכבה זו מקשרת בין התצוגה לנתונים ושומרת על מצב האפליקציה. הקבצים נמצאים בתיקייה viewmodel.
MarketViewModel.kt:
זהו ה"מוח" של האפליקציה.
תפקידו לשרוד שינויים בתצוגה (כמו סיבוב מסך) כדי שהמידע לא יאבד.
הוא חושף את הנתונים למסכים באמצעות LiveData – מנגנון שמאפשר למסך "להאזין" לשינויים ולהתעדכן אוטומטית כשהמידע משתנה בבסיס הנתונים.
פעולות כבדות (כמו שמירה בזיכרון) מתבצעות ברקע (Coroutines) כדי לא לתקוע את הממשק.
3. שכבת התצוגה (UI Layer)
החלק שהמשתמש רואה ואינטראקציה איתו.
MainActivity.kt:
החלון הראשי והיחיד באפליקציה (Single Activity).
הוא משמש כ"מיכל" (Container) שמחזיק בתוכו את הניווט ואת המסכים השונים שמתחלפים.
MarketAdapter.kt:
אחראי על ניהול רשימת הפריטים (RecyclerView).
הוא מקבל את המידע ומכניס אותו לתוך התבנית הגרפית של כל שורה. הוא דואג "למחזר" שורות כדי שהגלילה תהיה חלקה ומהירה.
המסכים (Fragments):
ListFragment.kt (המסך הראשי):
מציג את רשימת הפריטים.
מכיל כפתור (+) להוספה ומאזין ללחיצות על פריטים למעבר לפרטים.
מטפל בדיאלוג האישור לפני מחיקה.
AddEditFragment.kt (הוספה ועריכה):
מסך חכם המשמש לשתי מטרות:
הוספה: אם נפתח ריק, הוא יוצר פריט חדש.
עריכה: אם קיבל ID של מוצר, הוא טוען את הפרטים שלו לשדות ומאפשר לעדכן.
מטפל בבחירת תמונה מהגלריה ושמירת ההרשאות להצגתה.
DetailFragment.kt (פרטים):
מציג את המידע המלא על הפריט בצורה לקריאה בלבד.
מכיל כפתור "עריכה" שמעביר למסך העריכה.
4. משאבים וקבצים נוספים (Resources)
nav_graph.xml (Navigation):
מפה ויזואלית שמגדירה את כל המסכים באפליקציה ואת החיבורים (החצים) ביניהם.
מגדיר איזה מידע עובר בין מסכים (למשל: העברת ID של מוצר כשלוחצים עליו).
קבצי XML (Layouts):
מגדירים את העיצוב של כל מסך (כפתורים, טקסטים, תמונות ומיקומם).
